load "includes/sys"

def main(argc s32, argv u8**) s32
    print("What's your name: ")
    name = malloc(1024)
    sys_read(STDIN, name, 1024)
    print("And age: ")
    age = malloc(1024)
    sys_read(STDIN, age, 1024)
    print("Hello, ")
    print(name)
    print("You are ")
    printn(age, strlen(age)-2) # we remove the \n and \0
    print(" years old\n")
    return 1

extern malloc(u64) u8*

def printn(msg u8*, n s64) void
    sys_write(STDOUT, msg, n)

def print(msg u8*) void
    sys_write(STDOUT, msg, strlen(msg))

def strlen(x u8*) s64 => i = x while *x++ {} x-i
