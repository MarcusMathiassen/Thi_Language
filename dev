#!/bin/bash
output=./thi
olvl=
compiler=cc
src=./src/main.c
flags=-DDEV=1\ -g\ -fno-omit-frame-pointer\ -Wno-pointer-sign\ -Wno-switch
perfflags=-fno-rtti\ -fno-exceptions
std=c99
$compiler $src -std=$std $olvl $flags $perfflags -o $output

if [ $? == 0 ]; then
    test_files=$
    if [ ${#test_files} == 0 ]; then
        test_files="./tests/*.thi"
    fi
    if [ $? == 0 ]; then
        ./runtest ./tests/test_basic_setup.thi
    fi
fi
